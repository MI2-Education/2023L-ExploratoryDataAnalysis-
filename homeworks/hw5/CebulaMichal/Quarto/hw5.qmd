---
title: "Badanie PISA 2018 umiejętności finansowych a wskaźniki społeczno-ekonomiczne"
author: "Michał Cebula"
date: "`r Sys.Date()`"
abstract: |
  Badanie PISA jest największym badaniem umiejętności uczniów na świecie, realizowane co trzy lata we wszystkich krajach członkowskich OECD, a także w kilkudziesięciu innych państwach. W każdej edycji PISA nacisk położony jest na jedną spośród trzech dziedzin: rozumowanie matematyczne, rozumienie czytanego tekstu lub rozumowanie w naukach przyrodniczych, a w kolejnych edycjach również umiejętności finansowe (*financial literacy*). W niniejszej pracy przeanalizowane zostały zależności wyników badania PISA 2018 umiejętności finansowych w zależności od trzech wskaźników społeczno-ekonomicznych: GPD (PPP) per capita, procentu wydatków rządowych poświęconego na edukację, oraz liczby banków przypadających na 100,000 dorosłych mieszkańców, odpowiadając tym sposobem na pytanie czy wyższa wartość każdego z wybranych wskaźników warunkuje wyższą wartość wyniku badania.
---

<!-- Configuration Chunks -->

```{r}
#| label: config-python
#| include: false

reticulate::use_condaenv(
  conda = "~/miniforge3/condabin/conda",
  condaenv = "data-science"
)
```

```{python}
#| label: import-plotly
#| include: false

import plotly.express as px
```

# Wstęp

## Czym jest PISA?

*Organisation for Economic Co-operation and Development* (*OECD*), czyli *Organizacja Współpracy Gospodarczej i Rozwoju*, to międzynarodowa organizacja o profilu ekonomicznym, która ma na celu wspieranie państw członkowskich w osiągnięciu jak najwyższego poziomu wzrostu gospodarczego i stopy życiowej obywateli [@about-oecd].

Międzynarodowe konsorcjum nadzorowane przez OECD i przedstawicieli krajów członkowskich realizuje co 3 lata badanie *PISA* (*Programme for International Student Assessment*, czyli *Program Międzynarodowej Oceny Umiejętności Uczniów*) [@pisa-pl]. Jest to największe międzynarodowe badanie umiejętności uczniów na świecie, realizowane we wszystkich krajach członkowskich OECD, a także w kilkudziesięciu innych krajach. Polska uczestniczy w nim od samego początku, czyli od roku 2000.

Celem badania PISA jest sprawdzenie, w jakim stopniu młodzież, która ukończyła 15 lat w roku poprzedzającym badanie, opanowała niezbędne umiejętności potrzebne do funkcjonowania we współczesnym świecie: umiejętność rozumienia czytanego tekstu, rozumowania w zakresie nauk przyrodniczych oraz w zakresie matematyki [@pisa2018-flt-pl]. W kolejnych edycjach do badania włączane są dodatkowe dziedziny, istotne z punktu widzenia oceny przygotowania młodzieży do wyzwań dorosłego życia. Jedną z nich są umiejętności finansowe (*financial literacy*), których badanie w roku 2018. zostało przeprowadzone łącznie w 20 krajach, w tym 13 przynależących do OECD.

## Cel pracy

Intencją niniejszej pracy było przeanalizowanie zależności wyników badania PISA 2018 umiejętności finansowych w kontekście wybranych wskaźników społeczno-ekonomicznych państw biorących udział w badaniu. Wzięte pod uwagę wskaźniki to:

- *GDP* (*Gross Domestic Product*, czyli *Produkt Krajowy Brutto*) według *PPP* (*Purchasing Power Parity*, czyli *Parytetu Siły Nabywczej*), 
- procent wydatków rządowych poświęcony na edukację, 
- liczba oddziałów bankowych przypadająca na 100,000 dorosłych mieszkańców.

Przewiduje się, że wraz ze wzrostem wskazanych wyżej wskaźników społeczno-ekonomicznych państw, zostanie zaobserwowany wzrost umiejętności finansowych badanej młodzieży. Należy zatem zadać pytanie, w jakim stopniu i czy w ogóle przyjęte wskaźniki wpływają na wiedzę i świadomość ekonomiczną młodych ludzi. 

# Metoda badawcza

## Źródła danych

W pracy zostały wykorzystane oficjalne wyniki badania PISA umiejętności finansowych opublikowane przez OECD w 2020 roku [@pisa-data], zaś dane dotyczące wskaźników ekonomicznych w 2018. roku dla poszczególnych państw biorących udział w badaniu pochodziły z bazy *WDI* (*World Development Indicators*) należącej do *World Bank Group*, czyli *Grupy Banku Światowego* [@indicators].

## Narzędzia programistyczne

Przy opracowywaniu danych zostały użyte narzędzia dostępne dla języka R, zaś interaktywne wizualizacje zostały przygotowane z użyciem modułu *Plotly* dla języka Python [@plotly]. Równoczesna interakcja z oboma wykorzystanymi językami programowania możliwa była przy pomocy pakietu `reticulate` dla języka R [@reticulate].

Ze względu na złożoność oraz specyfikę modelu stosowanego przez PISA 2018 [@pisa-analysis], pomocny okazał się również pakiet `intsvy` do języka R implementujący podstawowe narzędzia do pracy m.in. z danymi dotyczącymi badania PISA [@intsvy].

```{r}
#| label: load-data
#| cache: true

gdp_cap_2018 <- read.csv(
  file = "Data/API_NY.GDP.PCAP.PP.KD_DS2_en_csv_v2_5359165.csv",
  skip = 4
)[c('Country.Code', 'X2018')]
names(gdp_cap_2018)[names(gdp_cap_2018) == "X2018"] <- "GDP.CAP"
wealthy_threshold <- stats::quantile(
  x = gdp_cap_2018$GDP.CAP, 
  probs = 0.75, 
  na.rm = TRUE
)  

xpd_totl_2018 <- read.csv(
  file = "Data/API_SE.XPD.TOTL.GB.ZS_DS2_en_csv_v2_5363848.csv",
  skip = 4
)[c('Country.Code', 'X2018')]
names(xpd_totl_2018)[names(xpd_totl_2018) == "X2018"] <- "XPD.TOTL"

cbk_brch_2018 <- read.csv(
  file = "Data/API_FB.CBK.BRCH.P5_DS2_en_csv_v2_5363000.csv",
  skip = 4
)[c('Country.Code', 'X2018')]
names(cbk_brch_2018)[names(cbk_brch_2018) == "X2018"] <- "CBK.BRCH"

pisa2018_flt <- foreign::read.spss(
  file = "Data/CY07_MSU_FLT_QQQ.SAV",
  use.value.labels = FALSE,
  to.data.frame = TRUE
)

data_joined <- 
  intsvy::pisa.mean.pv(
    pvlabel = "FLIT", 
    by = "CNT", 
    data = pisa2018_flt
  ) |> 
  merge(gdp_cap_2018, by.x = "CNT", by.y = "Country.Code") |> 
  merge(xpd_totl_2018, by.x = "CNT", by.y = "Country.Code") |> 
  merge(cbk_brch_2018, by.x = "CNT", by.y = "Country.Code") |> 
  transform(
    Bin = cut(Mean, c(350, 400, 450, 500, 550, 600)),
    IsWealthy = (GDP.CAP > wealthy_threshold)
  )
  data_joined <- data_joined[order(data_joined$Mean, decreasing = TRUE), ]
```

# Wyniki

Wyniki PISA nie mają nadanego konkretnego znaczenia, ponieważ nie są jednostkami fizycznymi takimi jak metry czy gramy [@pisa2018]. Zamiast tego są wyznaczone w odniesieniu do różnic w wynikach zaobserwowanych u wszystkich uczestników testu. Teoretycznie nie ma minimalnego ani maksymalnego wyniku PISA; raczej wyniki są skalowane tak, aby pasowały w przybliżeniu do rozkładów normalnych ze średnimi około 500 punktów i odchyleniami standardowymi około 100 punktów [@pisa2018].

Uśrednione wyniki testu dla krajów uczestniczących w badaniu PISA 2018 umiejętności finansowych przedstawione są na mapie poniżej. W celu lepszego rozróżnienia wyników wysokich od wyników niskich, każdemu z krajów został przypisany jeden z 5 przedziałów punktowych.

```{python}
#| label: fig-choropleth
#| fig-cap: "Mapa interaktywna przedstawiające uśrednione wyniki badania PISA&nbsp;2018 umiejętności finansowych według kraju. Odpowiednie kolory odnoszą się do poszczególnych przedziałów wartości, a średni wynik wraz z informacją o ujętych w pracy wskaźnikach ekonomicznych wybrangeo kraju można uzyskać poprzez najechanie kursorem myszy."

palette = ['Gold', 'Orange', 'OrangeRed', 'Red', 'DarkRed']
fig = px.choropleth(
  data_frame=r.data_joined,
  locations='CNT',
  color='Bin',
  color_discrete_sequence=palette,
  custom_data=['Mean', 'GDP.CAP', 'XPD.TOTL', 'CBK.BRCH']
)
fig = fig.update_traces(
  hovertemplate='<br>'.join([
    "Średni wynik: %{customdata[0]:.0f}",
    "GDP (PPP) per capita ($Intl.): %{customdata[1]:.2f}",
    "Wydatki rządowe na edukację (% wydatków): %{customdata[2]:.1f}%",
    "Liczba oddziałów bankowych (oddział/100,000 dorosłych): %{customdata[3]:.0f}",
    "<extra>%{location}</extra>"
  ])
)
fig = fig.update_geos(
  projection_type = "winkel3",
  showland=True, landcolor="LightGrey",
  showocean=True, oceancolor="LightBlue",
  showcountries=True, countrycolor="DarkGrey"
)
fig = fig.update_layout(
  title_text="<b>Wyniki badania PISA 2018 umiejętności finansowych według kraju</b>",
  legend_title="Przedział"
)
fig.show()
```

## Zależność od wskaźnika GDP (PPP) per capita

Wskaźnik GDP (PPP) per capita to produkt krajowy brutto na osobę przeliczony przy użyciu kursów parytetu siły nabywczej, przy czym kurs parytetu siły nabywczej to przelicznik walutowy, który kontroluje różnice w poziomie cen pomiędzy krajami [@gdp-ppp]. Atutem tego wskaźnika jest możliwość rzetelnej ocenę standardów życia mieszkańców w różnych krajach.

Jednostką, w której wyrażany jest GDP (PPP) per capita jest dolar międzynarodowy (Intl\$.). Dane wykorzystane w tej pracy przyjmują wartość dolara międzynarodowego ustaloną na rok 2017.

Na podstawie poniższego wykresu, przedstawiającego zależność wyników badania PISA 2018 umiejętności finansowych od wskaźnika GDP (PPP) per capita, nietrudno się przekonać o istnieniu dodatniej zależności liniowej między wynikiem badania a wartością wskaźnika. Nie mniej jednak, niektóre kraje z niższą wartością wskaźnika, jak Estonia, osiągnęły wyższe wyniki niż kraje bogatsze, jak Kanada czy Stany Zjednoczone.

```{python}
#| label: fig-scatter-GDP
#| fig-cap: "Wykres interaktywny przedstawiający zależność uśrednionych wyników badania PISA&nbsp;2018 umiejętności finansowych od wartości wkaźnika GDP&nbsp;(PPP) per capita. Odpowiednie punkty odnoszą się do poszczególnych państw uczestniczących w badaniu, a średni wynik wraz z wartością wskaźnika i kodem państwa dla wybranego punktu można uzyskać poprzez najechanie kursorem myszy, zaś dodatkowa linia oznacza trend."

fig = px.scatter(
  data_frame=r.data_joined, 
  x='GDP.CAP', 
  y='Mean',
  color_discrete_sequence=['black'],
  trendline='ols',
  trendline_color_override='DarkGrey',
  custom_data=['CNT']
)
fig = fig.update_traces(
  hovertemplate='<br>'.join([
    "Średni wynik: %{y:.0f}",
    "GDP (PPP) per capita: %{x:.2f}",
    "<extra>%{customdata[0]}</extra>"
  ])
)
fig = fig.update_traces(
  hovertemplate="",
  hoverinfo='skip',
  selector={'mode': 'lines'}
)
fig = fig.update_layout(
  title_text=
    "<b>Zależność wyników badania PISA 2018 umiejętności finansowych<br>" + 
    "od wskaźnika GDP (PPP) per capita</b>",
  xaxis_title="GDP (PPP) per capita (Intl$.)",
  yaxis_title="Średni wynik",
)
fig.show()
```

## Zależność od wydatków rządowych

Analizując uważnie poniższy wykres, przedstawiający zależność wyników badania PISA 2018 umiejętności finansowych od procentu wydatków rządowych poświęconego na edukację w stosunku do wszystkich rządowych wydatków, można zauważyć wyodrębnienie się dwóch grup: jednej, w której występuje dodatnia zależność liniowa wyniku badania od wskaźnika, i drugiej, w której takiej zależności zauważyć się nie da. Porównując wartości GNP (PPP) per capita z poprzedniego wykresu można zauważyć, że zależność liniowa dotyczy przede wszystkim krajów o średnim bądź wysokim standardzie życia.

```{python}
#| label: fig-scatter-edu
#| fig-cap: "Wykres interaktywny przedstawiający zależność uśrednionych wyników badania PISA&nbsp;2018 umiejętności finansowych od procenta wydatków rządowych poświęconego na edukację. Odpowiednie punkty odnoszą się do poszczególnych państw uczestniczących w badaniu, a średni wynik wraz z wartością wskaźnika i kodem państwa dla wybranego punktu można uzyskać poprzez najechanie kursorem myszy. Informacja określona kolorem odpowiada na pytanie czy państwo jest zamożne, przy czym przez zamożne państwo rozumie się, że wskaźnik GDP (PPP) per capita jest większy od trzeciego kwartyla wyliczonego dla wszystkich państw z danych WDI [@gdp-ppp]. Dodatkowe linie oznaczają trendy odpowiednio dla zamożnych i niezamożnych państw."

fig = px.scatter(
  data_frame=r.data_joined, 
  x='XPD.TOTL', 
  y='Mean',
  color='IsWealthy',
  trendline='ols',
  custom_data=['CNT']
)
fig = fig.update_traces(
  hovertemplate='<br>'.join([
    "Średni wynik: %{y:.0f}",
    "Procent wydatków: %{x:.1f}%",
    "<extra>%{customdata[0]}</extra>"
  ])
)
fig = fig.update_traces(
  name='Tak',
  selector={'mode': 'markers', 'legendgroup': 'True'}
)
fig = fig.update_traces(
  name='Nie',
  selector={'mode': 'markers', 'legendgroup': 'False'}
)
fig = fig.update_traces(
  hovertemplate="",
  hoverinfo='skip',
  line={'color': 'SkyBlue'},
  selector={'mode': 'lines', 'name': 'True'}
)
fig = fig.update_traces(
  hovertemplate="",
  hoverinfo='skip',
  line={'color': 'LightCoral'},
  selector={'mode': 'lines', 'name': 'False'}
)
fig = fig.update_layout(
  title_text=
    "<b>Zależność wyników badania PISA 2018 umiejętności finansowych<br>" + 
    "od procentu wydatków rządowych poświęconego na edukację</b>",
  xaxis_title="Wydatki rządowe na edukację (% wydatków)",
  yaxis_title="Średni wynik",
  legend_title="Czy zamożne?",
  hoverlabel={'font': {'color': 'white'}}
)
fig.show()
```

## Zależność od liczby oddziałów bankowych

Poniższy wykres, przedstawiający zależność wyników badania PIS 2018 umiejętności finansowych od liczby oddziałów bankowych przypadających na 100,000 dorosłych mieszkańców, nie wykazuje żadnej szczególnej zależności wskaźnika od wyników badania. Innymi słowy, dostępność usług bankowych ma znikomy wpływ na wynik badania.

```{python}
#| label: fig-scatter-banks
#| fig-cap: "Wykres interaktywny przedstawiający zależność uśrednionych wyników badania PISA&nbsp;2018 umiejętności finansowych od liczby oddziałów bankowych przypadających na 100,000 dorosłych mieszkańców. Odpowiednie punkty odnoszą się do poszczególnych państw uczestniczących w badaniu, a średni wynik wraz z wartością wskaźnika i kodem państwa dla wybranego punktu można uzyskać poprzez najechanie kursorem myszy, zaś dodatkowa linia oznacza trend."

fig = px.scatter(
  data_frame=r.data_joined, 
  x='CBK.BRCH', 
  y='Mean',
  color_discrete_sequence=['black'],
  trendline='ols',
  trendline_color_override='DarkGrey',
  custom_data=['CNT']
)
fig = fig.update_traces(
  hovertemplate='<br>'.join([
    "Średni wynik: %{y:.0f}",
    "Liczba oddziałów: %{x:.0f}",
    "<extra>%{customdata[0]}</extra>"
  ])
)
fig = fig.update_traces(
  hovertemplate="",
  hoverinfo='skip',
  selector={'mode': 'lines'}
)
fig = fig.update_layout(
  title_text=
    "<b>Zależność wyników badania PISA 2018 umiejętności finansowych<br>" +
    "od liczby oddziałów bankowych przypadających na 100,000 dorosłych</b>",
  xaxis_title="Liczba oddziałów bankowych (oddział/100,000 dorosłych)",
  yaxis_title="Średni wynik"
)
fig.show()
```

# Podsumowanie

Analiza zależności wyników od GDP (PPP) per capita nie odbiegała od przewidywań. Poza nielicznymi wyjątkami, wraz ze wzrostem wskaźnika obserwuje się wzrost wyniku badania. Zależności dla procentu wydatków rządowych na edukację oraz dla liczby oddziałów bankowych na 100,000 dorosłych mieszkańców nie podzielały tej cechy. Wyniki badania pozostawały w dodatniej zależności liniowej od procentu wydatków rządowych na edukację tylko dla zamożnych państw, zaś między wynikami badania a liczbą oddziałów bankowych zależność była znikoma, właściwie nieistotna. Można zatem powiedzieć, że wyłącznie pierwsze dwa wskaźniki miały wpływ na uśredniony wynik badania w poszczególnych państwach.

# Wnioski

Wraz ze wzrostem gospodarczym kraju rosną kompetencje finansowe jego mieszkańców, w tym młodych ludzi. Wzrost nakładów finansowych rządu na edukację ma wpływ na jej poziom i poziom wiedzy finansowej młodzieży, ale pod warunkiem, że w tym kraju zapewniony jest wysoki komfort życia mieszkańców. Kraje mało zamożne mimo zwiększonego udziału nakładów finansowych na edukację młodzieży, nie uzyskują oczekiwanego wzrostu jej kompetencji finansowej, co zapewne jest związane z niska stopą życiową. Natomiast  dostępność banków i związanych z tym usług finansowych nie powoduje oczekiwanego wzrostu zainteresowania nimi młodzieży i związanej z ich dostępnością świadomości finansowej.
